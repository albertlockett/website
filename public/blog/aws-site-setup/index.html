<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.b02337b1f101b586b3e7.css">.blog-post-container{font-family:Helvetica,Arial,sans-serif;font-weight:300;font-size:14px;max-width:680px;margin:auto}.blog-post-container p{text-align:justify}.blog-post-container a{color:#000}.blog-post-container .breadcrumb-sep{font-size:8px;margin:1px;position:relative;top:-1px}.blog-post-container .post-title{font-size:68px;font-weight:800;padding-top:6px}.blog-post-container .post-date{font-size:12px;font-style:italic;position:relative;top:-6px}.home-page{font-family:Helvetica,Arial,sans-serif;font-weight:300;font-size:14px;max-width:680px;margin:auto}.big-title{font-size:68px;font-weight:800}.little-title{font-size:12px;font-weight:600}.home-page .contact{position:relative;top:-10px;left:2px}.home-page a{color:#000}</style><meta name="generator" content="Gatsby 2.19.7"/><link as="script" rel="preload" href="/webpack-runtime-a6cf184f68a41e9ec336.js"/><link as="script" rel="preload" href="/commons-4ee73e8c6fb0caa6033d.js"/><link as="script" rel="preload" href="/app-648d20e88dddee9f66e4.js"/><link as="script" rel="preload" href="/styles-0647a6db614420569be1.js"/><link as="script" rel="preload" href="/component---src-templates-blog-template-js-06844653e947b7a449e3.js"/><link as="fetch" rel="preload" href="/page-data/blog/aws-site-setup/page-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="blog-post-container"><div><span><a href="/">Home</a></span><span class="breadcrumb-sep"> &gt; </span><span>Articles</span><span class="breadcrumb-sep"> &gt; </span></div><div class="blog-post"><div class="post-title">AWS Website Setup</div><div class="post-date">February 19, 2020</div><div><p>In this modern age, where internet and computers are so ubiquitous, many indiviuals and businesses would like to
have their own website. A website can be used to share information about yourself and your interests. Fortunately there
are many services that can be used to create your own  website and host it but these services vary widely in their cost,
ease of use and features.</p>
<p>If you&#x27;re an aspiring website administrator you may consider using AWS to host your site. It may not be as user friendly as some other services but it provies a lot of flexibility and the extra work you will have to do to deploy
your website on AWS may bring you a nice sense of accomplishment. What&#x27;s more, it will be a good learning experience,
and and having some AWS experience will look good on your resume.</p>
<p>This post will cover the steps to deploy your static website on AWS. It will show how to host the website
using an S3 bucket, use ACM to create a TLS certificate for your site, and use CloudFront to enable HTTPS and caching.
If you don&#x27;t already have an AWS account, you can
<a href="https://aws.amazon.com/premiumsupport/knowledge-center/create-and-activate-aws-account/">create one now</a>.</p>
<p>You&#x27;ll need a domain for your website, but I won&#x27;t be covering how to register your own domain or create DNS entries for
it. If you don&#x27;t already have a  domain name for your website, there are many services online that you can use to get
one. One option is to
<a href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/domain-register.html">use AWS Route53</a>.</p>
<p>I&#x27;m also not going to cover how to actually build your website. There are many ways to build it and far be it for
me to suggest the best way for you. If you don&#x27;t have a site built yet, you can
<a href="/aws-site-setup-example-site.zip">download</a>, extract and use the files from this exmaple to follow along</p>
<h2>1. Create an S3 Bucket for your site</h2>
<p><a href="https://aws.amazon.com/s3/">Amazon Simple Storage Service (Amazon S3)</a>
is a service for storing files in the cloud. We&#x27;ll be using S3 to store the
static files that make up your website. To use S3, navigate to the
<a href="https://console.aws.amazon.com/console/home">AWS Console</a> click on <em>Services</em> and then search for S3. Clicking
S3 should take you to the <a href="https://s3.console.aws.amazon.com/s3/home">S3 home page</a>.</p>
<p>Now create a new bucket to hold the static content for your site</p>
<ul>
<li>Click the <em>Create bucket</em> button
<span>
      <a>
    <span></span>
  <span style="max-width:100px;max-height:100px"><button style="padding:0;cursor:pointer;background:white;border:none;z-index:0" class="display-picture-button"><img style="width:12px;height:12px;cursor:pointer;position:relative;top:2px;z-index:1" src="/image_icon.png"/></button></span>
  </a>
    </span></li>
<li>In the <em>Bucket name</em> input, type in the domain name of your website (i.e &quot;albertlockett.ca&quot;)then  click Next
<span>
      <a>
    <span></span>
  <span style="max-width:100px;max-height:100px"><button style="padding:0;cursor:pointer;background:white;border:none;z-index:0" class="display-picture-button"><img style="width:12px;height:12px;cursor:pointer;position:relative;top:2px;z-index:1" src="/image_icon.png"/></button></span>
  </a>
    </span></li>
<li>Leave all defaults on Page 2 and click next</li>
<li>On Page 3 (the <em>Set Permissions</em> page), uncheck <em>Block all public access</em>, and when the banner with the
<em>I acknowlegdge...</em> text appears click the checkbox and then click Next
<span>
      <a>
    <span></span>
  <span style="max-width:100px;max-height:100px"><button style="padding:0;cursor:pointer;background:white;border:none;z-index:0" class="display-picture-button"><img style="width:12px;height:12px;cursor:pointer;position:relative;top:2px;z-index:1" src="/image_icon.png"/></button></span>
  </a>
    </span></li>
<li>On Page 4 click <em>Create bucket</em></li>
</ul>
<p>Your bucket will now display on the S3 buckets page. The next step is to configure it for static web hosting. </p>
<ul>
<li>Click on the name of the bucket, and then click on the Properties tab on the bucket details page.
<span>
      <a>
    <span></span>
  <span style="max-width:100px;max-height:100px"><button style="padding:0;cursor:pointer;background:white;border:none;z-index:0" class="display-picture-button"><img style="width:12px;height:12px;cursor:pointer;position:relative;top:2px;z-index:1" src="/image_icon.png"/></button></span>
  </a>
    </span></li>
<li>Click on <em>Static website hosting</em>.
<span>
      <a>
    <span></span>
  <span style="max-width:100px;max-height:100px"><button style="padding:0;cursor:pointer;background:white;border:none;z-index:0" class="display-picture-button"><img style="width:12px;height:12px;cursor:pointer;position:relative;top:2px;z-index:1" src="/image_icon.png"/></button></span>
  </a>
    </span></li>
<li>In the Static website hosting form, type &quot;index.html&quot; in the <em>Index document</em> field and click <em>Save</em>
<span>
      <a>
    <span></span>
  <span style="max-width:100px;max-height:100px"><button style="padding:0;cursor:pointer;background:white;border:none;z-index:0" class="display-picture-button"><img style="width:12px;height:12px;cursor:pointer;position:relative;top:2px;z-index:1" src="/image_icon.png"/></button></span>
  </a>
    </span></li>
</ul>
<p>Now add a Bucket Policy to allow your users from the internet to request your website&#x27;s files:</p>
<ul>
<li>Click on the Permissions tab</li>
<li>Click on Bucket Policy</li>
<li>Enter the following Bucket Policy (make sure to change &quot;albertlockett.ca&quot; to the domain from Step 1 for the bucket&#x27;s
name)
<span>
      <a>
    <span></span>
  <span style="max-width:100px;max-height:100px"><button style="padding:0;cursor:pointer;background:white;border:none;z-index:0" class="display-picture-button"><img style="width:12px;height:12px;cursor:pointer;position:relative;top:2px;z-index:1" src="/image_icon.png"/></button></span>
  </a>
    </span></li>
</ul>
<pre><code>{
    &quot;Version&quot;: &quot;2012-10-17&quot;,
    &quot;Statement&quot;: [
        {
            &quot;Sid&quot;: &quot;PublicReadGetObject&quot;,
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Principal&quot;: &quot;*&quot;,
            &quot;Action&quot;: &quot;s3:GetObject&quot;,
            &quot;Resource&quot;: &quot;arn:aws:s3:::albertlockett.ca/*&quot;
        }
    ]
}
</code></pre>
<p>Next we need to upload the content for the static site into the S3 bucket.</p>
<ul>
<li>On the <em>Overview</em> tab click the <em>Upload</em> button</li>
<li>Click <em>Add Files</em> and choose all the files for your website, click Next
<span>
      <a>
    <span></span>
  <span style="max-width:100px;max-height:100px"><button style="padding:0;cursor:pointer;background:white;border:none;z-index:0" class="display-picture-button"><img style="width:12px;height:12px;cursor:pointer;position:relative;top:2px;z-index:1" src="/image_icon.png"/></button></span>
  </a>
    </span></li>
<li>On the <em>Set Permissions</em> page, in the section called <em>Manage Public Permissions</em> choose <em>Grant Public Read Access
to this Object(s) ![create</em>bucket<em>button](./aws-site-setup/part</em>2/pic_9.png)</li>
<li>Click Next on Page 3 to accept defaults <span>
      <a>
    <span></span>
  <span style="max-width:100px;max-height:100px"><button style="padding:0;cursor:pointer;background:white;border:none;z-index:0" class="display-picture-button"><img style="width:12px;height:12px;cursor:pointer;position:relative;top:2px;z-index:1" src="/image_icon.png"/></button></span>
  </a>
    </span></li>
<li>Click Upload</li>
</ul>
<p>Now you&#x27;ll see your objects in the bucket.
<span>
      <a>
    <span></span>
  <span style="max-width:100px;max-height:100px"><button style="padding:0;cursor:pointer;background:white;border:none;z-index:0" class="display-picture-button"><img style="width:12px;height:12px;cursor:pointer;position:relative;top:2px;z-index:1" src="/image_icon.png"/></button></span>
  </a>
    </span></p>
<p>Now we can test our bucket is configured correctly. In your web browser, navigate to your bucket&#x27;s URL like this
(change albertlockett.ca for your bucket name). You can also get the bucket URL by clicking Properties -&gt; Static Web Hosting and  the link is beside a label called Endpoint.</p>
<p>For example:
<a href="http://albertlockett.ca.s3-website-us-east-1.amazonaws.com/">http://albertlockett.ca.s3-website-us-east-1.amazonaws.com/</a></p>
<p>You have the option now to create a DNS alias record for your domain to this domain but this has two disadvantages.
Depending on your needs, this might be good enough for practical purposes. The next sections of this guide will show
how to use CloudFront to improve the speed with which your website can be loaded and securely serve your website using
HTTPS</p>
<h2>2. Create a CloudFront Distrbution</h2>
<p><a href="https://aws.amazon.com/cloudfront/">AWS CloudFront</a> is a service that allows you to have your static content
distributed and cached on AWS&#x27;s CDN. While that&#x27;s nice for performance, using CloudFront also allows us to serve the
content over HTTPS and it allows us to use custom error pages. We can use this custom error page functionality to
return /index.html for any GET requests for content that isn&#x27;t in our bucket. This is especially useful for sites
using a client-side routing framework like react-router.</p>
<p>In the <a href="https://console.aws.amazon.com/console/home">AWS Console</a> click on <em>Services</em> and then search for CloudFront.
Clicking CloudFront should take you to the <a href="https://console.aws.amazon.com/cloudfront/home">CloudFront home page</a>. On
this page, click <em>Create Distribution</em>. <span>
      <span></span>
  <span style="max-width:100px;max-height:100px"><button style="padding:0;cursor:pointer;background:white;border:none;z-index:0" class="display-picture-button"><img style="width:12px;height:12px;cursor:pointer;position:relative;top:2px;z-index:1" src="/image_icon.png"/></button></span>
    </span></p>
<ul>
<li>Chose <em>Get Started</em> under the <em>Web</em> section. You&#x27;ll be taken to the <em>Create Distribution</em> form
<span>
      <a>
    <span></span>
  <span style="max-width:100px;max-height:100px"><button style="padding:0;cursor:pointer;background:white;border:none;z-index:0" class="display-picture-button"><img style="width:12px;height:12px;cursor:pointer;position:relative;top:2px;z-index:1" src="/image_icon.png"/></button></span>
  </a>
    </span></li>
<li>In the <em>Origin Settings</em> section, in the <em>Origin Domain Name</em> field, choose your new bucket (for example:
albertlockett.ca.s3.amazonaws.com)</li>
<li>In the <em>Distribution Settings</em> section, choose <em>Use Only U.S., Canada and Europe</em> in the Price Class setting (this is
the cheapest option).</li>
<li>Click <em>Create Distribution</em></li>
</ul>
<p>AWS will begin provisioning your CloudFront distribution. You&#x27;ll see your distribution with Status of <em>In Progress</em>. It
can take quite a while for the service to provision. <span>
      <a>
    <span></span>
  <span style="max-width:100px;max-height:100px"><button style="padding:0;cursor:pointer;background:white;border:none;z-index:0" class="display-picture-button"><img style="width:12px;height:12px;cursor:pointer;position:relative;top:2px;z-index:1" src="/image_icon.png"/></button></span>
  </a>
    </span></p>
<p>You can also see CloudFront creates a domain name for your distribution (i.e., d3f0oyjgi4e6fq.cloudfront.net). Once your
distribution status changes to <em>Deployed</em>, you should be able to paste this in your browser and be taken to your site.</p>
<p><em>Note</em> you&#x27;ll have to request an actual resource like /index.html, otherwise you may get a 403 message. e.g.
<a href="http://d3f0oyjgi4e6fq.cloudfront.net/index.html">http://d3f0oyjgi4e6fq.cloudfront.net/index.html</a></p>
<p>This is not ideal, but we can get the right content by setting up a custom error response. </p>
<ul>
<li>Click on the ID link of your distribution</li>
<li>Click on the Error Pages tab</li>
<li>Click Create Custom Error Response <span>
      <a>
    <span></span>
  <span style="max-width:100px;max-height:100px"><button style="padding:0;cursor:pointer;background:white;border:none;z-index:0" class="display-picture-button"><img style="width:12px;height:12px;cursor:pointer;position:relative;top:2px;z-index:1" src="/image_icon.png"/></button></span>
  </a>
    </span></li>
<li>Choose <em>HTTP Error Code</em> - <em>403: Forbidden</em></li>
<li>Choose <em>Customie Error Response</em> - <em>Yes</em></li>
<li>In Response Page Path type <em>/index.html</em></li>
<li>Choose <em>HTTP Response Code</em> - <em>200: OK</em></li>
<li>Click <em>Create</em> <span>
      <a>
    <span></span>
  <span style="max-width:100px;max-height:100px"><button style="padding:0;cursor:pointer;background:white;border:none;z-index:0" class="display-picture-button"><img style="width:12px;height:12px;cursor:pointer;position:relative;top:2px;z-index:1" src="/image_icon.png"/></button></span>
  </a>
    </span></li>
</ul>
<p>Your distribution may enter the <em>In Progress</em> status again after setting up the custom error response. After some time,
you should be able to go to &quot;/&quot; at your CloudFront domain and get the right content (i.e.
<a href="http://d3f0oyjgi4e6fq.cloudfront.net/">http://d3f0oyjgi4e6fq.cloudfront.net/</a>)</p>
<h2>3. Use your custom domain for CloudFront &amp; Enable HTTPS</h2>
<p>You can now create an Alias DNS record for your custom domain to the CloudFront domain, but CloudFront won&#x27;t serve the
content unless you configure CloudFront with an SSL Certificate, so we&#x27;ll set one of those up first. There are probably
many options to get yourself a cert but I&#x27;m going to use AWS&#x27;s Certificate Manager (ACM) service.</p>
<p>Note that to request a cert through ACM, you either need access to create DNS records for that domain, or you need
access to the email address associated with the WHOIS contact info for the domain (or one of the aminsistrative email
addresses, e.g. admin@example.com).</p>
<p>In the <a href="https://console.aws.amazon.com/console/home">AWS Console</a> click on <em>Services</em> and then search for Certificate
Manager. Clicking Certificate Manger should take you to the <a href="https://console.aws.amazon.com/acm/hom">ACM home page</a>. On
this page, click <em>Request a certificate</em>.</p>
<ul>
<li>Choose Request a public certificate</li>
<li>In the <em>Add domain names</em> form, type your domain name and click Next
<span>
      <a>
    <span></span>
  <span style="max-width:100px;max-height:100px"><button style="padding:0;cursor:pointer;background:white;border:none;z-index:0" class="display-picture-button"><img style="width:12px;height:12px;cursor:pointer;position:relative;top:2px;z-index:1" src="/image_icon.png"/></button></span>
  </a>
    </span></li>
<li>Here there are two options for validating that you are the owner of the cert. I&#x27;m going to use DNS Validation but if
you want to use email validation you can do that
<a href="https://docs.aws.amazon.com/acm/latest/userguide/gs-acm-validate-email.html">here</a>. Choose <em>DNS Validation</em></li>
<li>Add tags if you like, or click <em>Review</em></li>
<li>Click <em>Confirm and Request</em>
<span>
      <a>
    <span></span>
  <span style="max-width:100px;max-height:100px"><button style="padding:0;cursor:pointer;background:white;border:none;z-index:0" class="display-picture-button"><img style="width:12px;height:12px;cursor:pointer;position:relative;top:2px;z-index:1" src="/image_icon.png"/></button></span>
  </a>
    </span></li>
</ul>
<p>You&#x27;ll now have to go through a validation process with AWS to have the cert issued. If you&#x27;re using DNS validation,
you&#x27;ll see that it wants you to create a CNAME entry with your DNS provider in order to validate the cert.
<span>
      <a>
    <span></span>
  <span style="max-width:100px;max-height:100px"><button style="padding:0;cursor:pointer;background:white;border:none;z-index:0" class="display-picture-button"><img style="width:12px;height:12px;cursor:pointer;position:relative;top:2px;z-index:1" src="/image_icon.png"/></button></span>
  </a>
    </span>
If you&#x27;re using Route 53, just click <em>Create Record in Route 53</em> and it will create the validation record automatically.</p>
<p>Node that it may take up to 30 minutes for the DNS changes to propagate, and for AWS to validate the domain.</p>
<p>After Validation you can click <em>Continue</em>.</p>
<p>Now it&#x27;s time to configure the CloudFront distribution with your custom domain name and SSL cert. </p>
<ul>
<li>Go to CloudFront and clikc on the ID link for your distribution</li>
<li>Click Edit
<span>
      <a>
    <span></span>
  <span style="max-width:100px;max-height:100px"><button style="padding:0;cursor:pointer;background:white;border:none;z-index:0" class="display-picture-button"><img style="width:12px;height:12px;cursor:pointer;position:relative;top:2px;z-index:1" src="/image_icon.png"/></button></span>
  </a>
    </span> </li>
<li>In the box that says <em>Alternate Domain Names (CNAMEs)</em> type your custom domain name (e.g. albertlockett.ca)</li>
<li>In the <em>SSL Certificate</em> field, choose <em>Custom SSL Certificate (example.com):</em></li>
<li>In the textbox, choose your cert
<span>
      <a>
    <span></span>
  <span style="max-width:100px;max-height:100px"><button style="padding:0;cursor:pointer;background:white;border:none;z-index:0" class="display-picture-button"><img style="width:12px;height:12px;cursor:pointer;position:relative;top:2px;z-index:1" src="/image_icon.png"/></button></span>
  </a>
    </span> </li>
<li>click <em>Yes, Edit</em> at the bottom of the form</li>
</ul>
<p>Your CloudFront distribution will enter the <em>In Progress</em> state again. After it&#x27;s done you should be able to access
your site at your own domain name:</p>
<p><a href="http://albertlockett.ca">http://albertlockett.ca</a></p>
<p>or using HTTPS</p>
<p><a href="https://albertlockett.ca">https://albertlockett.ca</a></p>
<h2>Closing Remarks</h2>
<p>Creating your own website can be a good experience. I hope this article has helped you create your own website and that
you had a good time or learned something new.</p>
<p>Someday, you may want to update the content on your website. The first thing you&#x27;ll need to do is to update the content
in your S3 bucket. You ca simply delete the files already in the bucket, and then replace them with your updated
content.</p>
<p>After you update the content, it can take some time for the changes to propagate if you set up CloudFront CDN. This is
because your files are cached in CDN for some time. To manually invalidate the cache, navigate to CloudFront in the
AWS console and click <em>Invalidations</em> and then click <em>Create Invalidation</em> and in the <em>Object Paths</em> input you can put
/*.</p>
<p>All that said, having to log into the console every time can be kind of cumbersome, so you may consider
<a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html#cli-quick-configuration/">setting up the AWS cli</a>
which would allow you to synchronize your website&#x27;s files to the s3 bucket, and to create invalidations all from the
comand line:</p>
<pre><code>aws s3 sync ./my-website/ s3://albertlockett.ca

aws cloudfront create-invalidation \
  --distribution-id &lt;MyDistId&gt; \
  --paths &quot;/*&quot;
</code></pre>
<p>If you have any questions, comments or concerns about the information in this article please don&#x27;t hesitate to
<a href="mailto:albert.lockett@gmail.com">reach out</a></p></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/aws-site-setup";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-648d20e88dddee9f66e4.js"],"component---src-templates-blog-template-js":["/component---src-templates-blog-template-js-06844653e947b7a449e3.js"],"component---src-pages-404-js":["/component---src-pages-404-js-0290f163286959b63491.js"],"component---src-pages-index-js":["/component---src-pages-index-js-3dff630f8107c38eb8fb.js"],"component---src-pages-page-2-js":["/component---src-pages-page-2-js-a28c7931d51e8ba870ab.js"]};/*]]>*/</script><script src="/component---src-templates-blog-template-js-06844653e947b7a449e3.js" async=""></script><script src="/styles-0647a6db614420569be1.js" async=""></script><script src="/app-648d20e88dddee9f66e4.js" async=""></script><script src="/commons-4ee73e8c6fb0caa6033d.js" async=""></script><script src="/webpack-runtime-a6cf184f68a41e9ec336.js" async=""></script></body></html>